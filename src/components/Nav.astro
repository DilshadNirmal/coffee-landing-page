---
import { Icon } from "astro-icon/components";
import Link from "./Link.astro";
import Button from "./Button.astro";

const navItems = [
    {
        text: "Home",
        href: "/",
    },
    {
        text: "Menu",
        href: "menu",
    },
    {
        text: "Delivery",
        href: "delivery",
    },
];

const currentPage = Astro.url.pathname;
---

<nav class="flex w-full justify-between px-4 py-3 items-center">
    <Link 
        href="/" 
        classes="" 
        intent={"icon"} 
        size={"xsmall"} 
        aria-label="Go Home" 
        title="Go Home"
    >
        <Icon name="CoffeeLove" width={36} height={60} class="size-6 sm:size-9" />
    </Link>

    <ul class="hidden md:flex gap-6 items-center">
        {
        navItems.map(i => (
            <li>
                <Link href={i.href} intent={"nav"}
                    size={"small"}
                    currentPage={currentPage === i.href}
                >
                    {i.text}
                </Link>
            </li>
        ))
        }
    </ul>

    <div class="hidden sm:flex gap-2 items-center">
        <div class="bg-white shadow rounded-full py-2 px-4 focus-within:ring-4 ring-accent2 transition-shadow flex gap-4">
            <Icon name="search" size={24} />
            <input type="text" name="search" id="search-input" class="focus:outline-none"
                placeholder="coffee search"
            />
        </div>

        <Button id="view-cart" aria-label="view cart" intent={"icon"} size={"xsmall"} title="view cart" >
            <Icon name="cart" size={24} />
        </Button>
    </div>    

    <Button 
        intent={"icon"} 
        size={"xsmall"} 
        id="mobile-nav" 
        aria-label="Open mobile nav"
        classes="md:hidden" 
    >
        <Icon name="mobile-nav" size={30} />
    </Button>
</nav>

<script>
    const mobileNavButton = document.querySelector("#mobile-nav") as HTMLButtonElement;
    const cartButton = document.querySelector("#view-cart") as HTMLButtonElement;

    mobileNavButton.addEventListener("click", () => {
        alert("i am clicked");
    });

    cartButton.addEventListener("click", () => {
        alert("yo, cartu");
    });
</script>